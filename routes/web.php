<?php

use App\Alphabet;
use App\IndexOfCoincidence;
use App\Kasiski;

Route::get('/', function () { });

Route::get('cipher', function () {
    $string = "GVUCRGYDHOJSBBIKFFUMNZBOQPOZYOJYNBTKFJYFVRBINQJOQIFYAPOMBFJOMVQFROSYZAEXNBTSAHUBRGJSAUKXQSHVLWDQYCWSPBEDVQUDUOJDUSIYYRYOEGQBRBEDZCJSIOJOQHEBRHHONHZEFHEBRJUXZOYXYMRIGVUSEFQDVCDKYOICRGIWRBJYSHXOQODQRFIYSPQDGZUKARRIGVUSEGUVSWDDRFUCGFQDUSHDUSONVGSYISHKFCKXQFUKFCDDBFKXNKQIOMHONZYJVBWDUOJGUOJSGAQURGIOAGUPBFJRRAJYQCTOCSDNFCDGUOJSGKYVYAQURGUXFSVYECJRRFIDBREKARJRNHQVYCVDUSEDUSHCPODXBHYMRHXSFHEYRJUXNEKSGSRBNJUCBZTSRFCKLDHOSSHDBFKXEOJRRFJRNBXOECYMNZBIOIJZBWDDYSICYMTSRHHIVBWDBGJOZHXOBBSYZWDQGWTONZBLLVYWFSBPGVKCJSSYHZTSZOWSASMSGVEEGQEXGFQNVQJSBBQMVFSEZGJKAQUSAKXSPVQXNFCINZBYSKXYFSCOZPUBFOHOOFQFRTBORGQDGCFCCSUNOSVYESJRRSDOZMCKXSIKZCLOVTJRRGEVQWUBFFUKYZOKESRBNJUDUSDDUWICHFUVLWIXGHXOBIJMBAUKAMEPGVUWJODDRRUKPVMYHZTRNJUZESVOEFUNGVQDNZBCGODNNBTPVUXDJVQDJSXKISXOESJRRBYCNQQCRWDGUWSRGVUSAHUBNQJSBBEPZODIVBTSIWTENZBIEOJSBBQVQSSSFWEXZOASAUFBBQUCFSIYASFBBQUCFDUBFCBNVSHZECTEPSIKACKDPCCOVBJOARUNOMDYBBUWBGJKEAYOFHHIGCQFBWTDUWIZECRVRAZEFHQCPCHDRNTSQGYXPSJRRMSKAHKCHOBVLAQURFUDESQDCVOCVQQVYMYWCCICVPBOGVUIZOAOVHUMBBEWVQQVYMYWCCICVPBOGVUIFVEYGRUCRFJOEGJRRBIDNBTSAUQXQTYQUHYXTWIONQXCBZTSRFISARYFVRKKYZOBNHYYAOBMBIHCRCVKPHYYAOVDRFQVYPUMNIIOGVUMBGJYSFKXAWDQVGIEESJYOSQDYSQCGOIRVUXKFHXOPCIDBTIDNMYXT";
    $kasiski = new Kasiski($string);
    // return $kasiski->iterateString()->getResult();

    $positions = $kasiski->getStringPositions('GVU');
    // $string = $kasiski->transposeString($positions);
    return $gcd = $kasiski->getGCD($positions);
    return $kasiski->getPlainText();

    return view('welcome', compact('string', 'gcd'));
});

// Route::get('ioc', function () {
//     $string = "EDELLMELTNANKLZTPRCRNNEZCYEPPEZYWSLLPYSRQWMTQCLETPFLZHCKSLLPZXOOSHLYCCZSWPCYPEPTLWXPZLEPLFYDPYEPXTWXEPOTENLTTDPTLWSPDCWEAPEPVZEWDWMESCDPZJPENWPPEWYQHPSSLTNTLYYTLLLTXRPZZAWANZXPMYEPETDWDZOYPEWVCSLXTSVNTJDPDOESLRTYLWDGWEWDNLLNEDFRCPLSDZDY";

//     $ioc = (new IndexOfCoincidence())->setString($string);

//     return $ioc->calculateIndex();
//     return $ioc->getChiSquare();
// });
